<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Translation System Tests</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-section {
            margin-bottom: 30px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .test-section h3 {
            color: #333;
            margin-top: 0;
        }
        .test-result {
            margin: 10px 0;
            padding: 8px;
            border-radius: 4px;
        }
        .test-pass {
            background-color: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }
        .test-fail {
            background-color: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }
        .example-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        .example-table th, .example-table td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        .example-table th {
            background-color: #f8f9fa;
        }
        button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üåê Translation System Test Suite</h1>
        <p>Testing the Hindi translation functionality for Indian states, districts, and subdistricts.</p>

        <button onclick="runAllTests()">Run All Tests</button>
        <button onclick="clearResults()">Clear Results</button>

        <div id="test-results"></div>

        <div class="test-section">
            <h3>üìç Sample Location Translations</h3>
            <table class="example-table">
                <thead>
                    <tr>
                        <th>English</th>
                        <th>Hindi (‡§π‡§ø‡§Ç‡§¶‡•Ä)</th>
                        <th>Type</th>
                    </tr>
                </thead>
                <tbody id="example-translations">
                    <!-- Will be populated by JavaScript -->
                </tbody>
            </table>
        </div>

        <div class="test-section">
            <h3>üß™ Interactive Testing</h3>
            <label for="location-input">Enter a location name:</label>
            <input type="text" id="location-input" placeholder="e.g., Bhopal, Huzur, Indore" style="margin: 10px; padding: 5px;">
            <button onclick="testLocationTranslation()">Translate</button>
            <div id="translation-result" style="margin-top: 10px;"></div>
        </div>
    </div>

    <script type="module">
        // Mock translation data for testing (simplified version)
        const translations = {
            en: {
                selectState: "State",
                selectDistrict: "District",
                selectSubdistrict: "Subdistrict"
            },
            hi: {
                selectState: "‡§∞‡§æ‡§ú‡•ç‡§Ø",
                selectDistrict: "‡§ú‡§ø‡§≤‡§æ",
                selectSubdistrict: "‡§§‡§π‡§∏‡•Ä‡§≤",

                // Location translations
                bhopal: "‡§≠‡•ã‡§™‡§æ‡§≤",
                indore: "‡§á‡§Ç‡§¶‡•å‡§∞",
                gwalior: "‡§ó‡•ç‡§µ‡§æ‡§≤‡§ø‡§Ø‡§∞",
                jabalpur: "‡§ú‡§¨‡§≤‡§™‡•Å‡§∞",
                ujjain: "‡§â‡§ú‡•ç‡§ú‡•à‡§®",
                huzur: "‡§π‡•Å‡§ú‡•Ç‡§∞",
                berasia: "‡§¨‡•à‡§∞‡§∏‡§ø‡§Ø‡§æ",
                kolar: "‡§ï‡•ã‡§≤‡§æ‡§∞",
                goharganj: "‡§ó‡•ã‡§π‡§∞‡§ó‡§Ç‡§ú",
                begamganj: "‡§¨‡•á‡§ó‡§Æ‡§ó‡§Ç‡§ú",
                raisen: "‡§∞‡§æ‡§Ø‡§∏‡•á‡§®",
                rajgarh: "‡§∞‡§æ‡§ú‡§ó‡§¢‡§º",
                sehore: "‡§∏‡•Ä‡§π‡•ã‡§∞",
                vidisha: "‡§µ‡§ø‡§¶‡§ø‡§∂‡§æ",
                nasrullaganj: "‡§®‡§∏‡§∞‡•Å‡§≤‡•ç‡§≤‡§æ‡§ó‡§Ç‡§ú",
                mumbai: "‡§Æ‡•Å‡§Ç‡§¨‡§à",
                delhi: "‡§¶‡§ø‡§≤‡•ç‡§≤‡•Ä",
                chennai: "‡§ö‡•á‡§®‡•ç‡§®‡§à",
                kolkata: "‡§ï‡•ã‡§≤‡§ï‡§æ‡§§‡§æ"
            }
        };

        const useTranslation = (language) => {
            const t = (key) => translations[language]?.[key] || key;

            const tLocation = (locationName) => {
                if (!locationName || language === 'en') return locationName;
                const lookupKey = locationName.toLowerCase();
                return translations[language]?.[lookupKey] || locationName;
            };

            return { t, tLocation };
        };

        window.runAllTests = function() {
            const resultsDiv = document.getElementById('test-results');
            resultsDiv.innerHTML = '<h2>üß™ Test Results</h2>';

            const testResults = [];

            // Test 1: Basic UI translations
            try {
                const { t: tEn } = useTranslation('en');
                const { t: tHi } = useTranslation('hi');

                const enState = tEn('selectState');
                const hiState = tHi('selectState');

                const pass1 = enState === 'State' && hiState === '‡§∞‡§æ‡§ú‡•ç‡§Ø';
                testResults.push({
                    name: 'Basic UI Translations',
                    passed: pass1,
                    details: `EN: ${enState}, HI: ${hiState}`
                });
            } catch (e) {
                testResults.push({
                    name: 'Basic UI Translations',
                    passed: false,
                    details: `Error: ${e.message}`
                });
            }

            // Test 2: Location translations
            try {
                const { tLocation } = useTranslation('hi');

                const bhopal = tLocation('Bhopal');
                const huzur = tLocation('Huzur');
                const mumbai = tLocation('Mumbai');

                const pass2 = bhopal === '‡§≠‡•ã‡§™‡§æ‡§≤' && huzur === '‡§π‡•Å‡§ú‡•Ç‡§∞' && mumbai === '‡§Æ‡•Å‡§Ç‡§¨‡§à';
                testResults.push({
                    name: 'Location Name Translations',
                    passed: pass2,
                    details: `Bhopal: ${bhopal}, Huzur: ${huzur}, Mumbai: ${mumbai}`
                });
            } catch (e) {
                testResults.push({
                    name: 'Location Name Translations',
                    passed: false,
                    details: `Error: ${e.message}`
                });
            }

            // Test 3: Fallback behavior
            try {
                const { tLocation } = useTranslation('hi');

                const unknown = tLocation('UnknownPlace');
                const pass3 = unknown === 'UnknownPlace';
                testResults.push({
                    name: 'Fallback for Unknown Locations',
                    passed: pass3,
                    details: `Unknown place returns: ${unknown}`
                });
            } catch (e) {
                testResults.push({
                    name: 'Fallback for Unknown Locations',
                    passed: false,
                    details: `Error: ${e.message}`
                });
            }

            // Test 4: Case insensitive
            try {
                const { tLocation } = useTranslation('hi');

                const lowercase = tLocation('bhopal');
                const uppercase = tLocation('INDORE');
                const pass4 = lowercase === '‡§≠‡•ã‡§™‡§æ‡§≤' && uppercase === '‡§á‡§Ç‡§¶‡•å‡§∞';
                testResults.push({
                    name: 'Case Insensitive Lookups',
                    passed: pass4,
                    details: `lowercase bhopal: ${lowercase}, UPPERCASE INDORE: ${uppercase}`
                });
            } catch (e) {
                testResults.push({
                    name: 'Case Insensitive Lookups',
                    passed: false,
                    details: `Error: ${e.message}`
                });
            }

            // Display results
            testResults.forEach(result => {
                const div = document.createElement('div');
                div.className = `test-result ${result.passed ? 'test-pass' : 'test-fail'}`;
                div.innerHTML = `
                    <strong>${result.passed ? '‚úÖ' : '‚ùå'} ${result.name}</strong><br>
                    ${result.details}
                `;
                resultsDiv.appendChild(div);
            });

            const passedCount = testResults.filter(r => r.passed).length;
            const totalCount = testResults.length;

            const summaryDiv = document.createElement('div');
            summaryDiv.className = 'test-result';
            summaryDiv.style.backgroundColor = passedCount === totalCount ? '#d4edda' : '#fff3cd';
            summaryDiv.innerHTML = `<strong>üìä Summary: ${passedCount}/${totalCount} tests passed</strong>`;
            resultsDiv.appendChild(summaryDiv);

            // Populate example table
            populateExampleTable();
        };

        window.clearResults = function() {
            document.getElementById('test-results').innerHTML = '';
            document.getElementById('translation-result').innerHTML = '';
        };

        window.testLocationTranslation = function() {
            const input = document.getElementById('location-input').value.trim();
            const resultDiv = document.getElementById('translation-result');

            if (!input) {
                resultDiv.innerHTML = '<em>Please enter a location name</em>';
                return;
            }

            const { tLocation } = useTranslation('hi');
            const translated = tLocation(input);

            resultDiv.innerHTML = `
                <strong>Translation Result:</strong><br>
                <strong>English:</strong> ${input}<br>
                <strong>Hindi:</strong> ${translated}
                ${translated === input ? ' <em>(No translation available)</em>' : ''}
            `;
        };

        function populateExampleTable() {
            const examples = [
                { en: 'Bhopal', type: 'District' },
                { en: 'Indore', type: 'District' },
                { en: 'Huzur', type: 'Subdistrict' },
                { en: 'Berasia', type: 'Subdistrict' },
                { en: 'Mumbai', type: 'City' },
                { en: 'Delhi', type: 'City' }
            ];

            const { tLocation } = useTranslation('hi');
            const tbody = document.getElementById('example-translations');

            examples.forEach(example => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${example.en}</td>
                    <td>${tLocation(example.en)}</td>
                    <td>${example.type}</td>
                `;
                tbody.appendChild(row);
            });
        }

        // Auto-run some tests on page load
        document.addEventListener('DOMContentLoaded', () => {
            populateExampleTable();
        });

    </script>
</body>
</html>